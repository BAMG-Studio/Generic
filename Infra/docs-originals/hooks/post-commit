#!/usr/bin/env bash
# Example post-commit hook stored in docs/hooks; use scripts/setup-hooks.sh to install
AUTO_PUSH=${AUTO_PUSH:-1}
PUSH_REMOTE=${PUSH_REMOTE:-origin}
PUSH_BRANCH=${PUSH_BRANCH:-lab-folio}
CURRENT_BRANCH=$(git rev-parse --abbrev-ref HEAD)

if [ "${AUTO_PUSH}" = "1" ]; then
  if [ "${DRY_RUN:-0}" = "1" ]; then
    echo "[hook-dry-run] git push --dry-run ${PUSH_REMOTE} HEAD:${PUSH_BRANCH}"
  else
    echo "[hook-hint] AUTO_PUSH=1 â€” pushing to ${PUSH_REMOTE}/${PUSH_BRANCH}"
    git push "${PUSH_REMOTE}" "HEAD:${PUSH_BRANCH}" || echo "[hook] push failed"
  fi
else
  echo "[hook] Commit recorded on ${CURRENT_BRANCH}. Remember to push to ${PUSH_REMOTE}/${PUSH_BRANCH}."
fi
